<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDGFEST</title>
    <link rel="icon" href="/images/Untitled design (3).png" type="image/x-icon">
    <link rel="stylesheet" href="/source/form.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>GDGFEST REGISTRATION FORM</h1>
    <form id="gdgForm" action="https://script.google.com/macros/s/AKfycbyVqJfNqVSibGT0h_y-75vrFYXkNxTigtrk1z0EdV6XdpWb8NEr4pKDq5Hj8LVyCukckQ/exec" method="POST">
        <label for="Name">Name:</label><br>
        <input type="text" id="Name" name="entry.667900740" required><br><br>

        <label for="Mailid">Mail:</label><br>
        <input type="email" id="Mailid" name="entry.62233316" required><br><br>

        <label for="Mobilenumber">Mobile Number:</label>
        <input type="tel" id="Mobilenumber" name="entry.114232771" required><br><br>

        <label for="College">College Name:</label><br>
        <input type="text" id="College" name="entry.1364589753" required><br><br>

        <label for="Deptyear">Department/Year (ex: CSE/II):</label><br>
        <input type="text" id="Deptyear" name="entry.1443593806" required><br><br>

        <label>Event Packages (Per Person):</label><br>

        <div class="radio-group">
            <input type="radio" id="Flagship Event + All Events (Includes Workshop) - ₹250" name="entry.387616278" value="Flagship Event + All Events (Includes Workshop) - ₹250" required>
            <label for="Flagship Event + All Events (Includes Workshop) - ₹250">Flagship Event + All Events (Includes Workshop) - ₹250</label>
        </div>

        <div class="radio-group">
            <input type="radio" id="Flagship Event + All Events (Excludes Workshop) - ₹200" name="entry.387616278" value="Flagship Event + All Events (Excludes Workshop) - ₹200">
            <label for="Flagship Event + All Events (Excludes Workshop) - ₹200">Flagship Event + All Events (Excludes Workshop) - ₹200</label>
        </div>

        <div class="radio-group">
            <input type="radio" id="Flagship Events + Workshop - ₹200" name="entry.387616278" value="Flagship Events + Workshop - ₹200">
            <label for="Flagship Events + Workshop - ₹200">Flagship Events + Workshop - ₹200</label>
        </div>

        <div class="radio-group">
            <input type="radio" id="Technical & Non-Technical Events + Workshop - ₹200" name="entry.387616278" value="Technical & Non-Technical Events + Workshop - ₹200">
            <label for="Technical & Non-Technical Events + Workshop - ₹200">Technical & Non-Technical Events + Workshop - ₹200</label>
        </div>

        <div class="radio-group">
            <input type="radio" id="Only Workshop - ₹150" name="entry.387616278" value="Only Workshop - ₹150">
            <label for="Only Workshop - ₹150">Only Workshop - ₹150</label>
        </div>

        <label>Flagship Events (Select any one or None):</label><br>

        <div class="radio-group">
            <input type="checkbox" id="Designathon" name="entry.1226801076[]" value="Designathon">
            <label for="Designathon">Designathon</label>
        </div>

        <div class="radio-group">
            <input type="checkbox" id="Paper Presentation" name="entry.1226801076[]" value="Paper Presentation">
            <label for="Paper Presentation">Paper Presentation</label>
        </div>

        <label>Technical Events (Select any one or None):</label><br>

        <div class="radio-group">
            <input type="checkbox" id="Capture the Flag (CTF)" name="entry.577969518[]" value="Capture the Flag (CTF)">
            <label for="Capture the Flag (CTF)">Capture the Flag (CTF)</label>
        </div>

        <div class="radio-group">
            <input type="checkbox" id="Code Combat" name="entry.577969518[]" value="Code Combat">
            <label for="Code Combat">Code Combat</label>
        </div>

        <div class="radio-group">
            <input type="checkbox" id="Circuit Board" name="entry.577969518[]" value="Circuit Board">
            <label for="Circuit Board">Circuit Board</label>
        </div>

        <!-- Warning for technical events -->
        <div id="technicalWarning" class="warning-message" style="display: none;">
            ⚠️ Note: Code Combat and Circuit Board are scheduled at the same time slot
        </div>

        <label>Non-technical Events:</label><br>

        <div class="radio-group">
            <input type="checkbox" id="Graphic Design" name="entry.1034072283[]" value="Graphic Design">
            <label for="Graphic Design">Graphic Design</label>
        </div>

        <div class="radio-group">
            <input type="checkbox" id="Free Fire" name="entry.1034072283[]" value="Free Fire">
            <label for="Free Fire">Free Fire</label>
        </div>

        <div class="radio-group">
            <input type="checkbox" id="Anime Quiz" name="entry.1034072283[]" value="Anime Quiz">
            <label for="Anime Quiz">Anime Quiz</label>
        </div>

        <div class="radio-group">
            <input type="checkbox" id="Connections" name="entry.1034072283[]" value="Connections">
            <label for="Connections">Connections</label>
        </div>

        <!-- Warning for non-technical events -->
        <div id="nonTechnicalWarning" class="warning-message" style="display: none;">
            ⚠️ Note: Anime Quiz and Connections are scheduled at the same time slot
        </div>

        <!-- Add payment section -->
        <div id="paymentSection" style="display: none;">
            <label>Complete Payment to Enable Form Submission:</label>
            <div id="paymentAmount" class="payment-info"></div>
            <button type="button" id="payButton" class="razorpay-button">Pay Now</button>
            <div id="paymentStatus" class="payment-status">Payment Pending</div>
        </div>

        <input type="submit" value="Submit" id="submitButton">
    </form>

    <div id="thankYouMessage" style="display:None;">
        <p>Your response has been recorded. Thank you!</p>
    </div>
    <script>
        // Form submission
        $('#gdgForm').submit(function(event) {
            event.preventDefault(); // Prevent the default form submission
            
            // Create a new FormData object
            var formData = new FormData(this);
            
            // Handle checkbox groups separately
            var flagshipEvents = [];
            $('input[name="entry.1226801076[]"]:checked').each(function() {
                flagshipEvents.push($(this).val());
            });
            
            var technicalEvents = [];
            $('input[name="entry.577969518[]"]:checked').each(function() {
                technicalEvents.push($(this).val());
            });
            
            var nonTechnicalEvents = [];
            $('input[name="entry.1034072283[]"]:checked').each(function() {
                nonTechnicalEvents.push($(this).val());
            });
            
            // Create the data object for submission
            var submitData = {
                'entry.667900740': formData.get('entry.667900740'),
                'entry.62233316': formData.get('entry.62233316'),
                'entry.114232771': formData.get('entry.114232771'),
                'entry.1364589753': formData.get('entry.1364589753'),
                'entry.1443593806': formData.get('entry.1443593806'),
                'entry.387616278': formData.get('entry.387616278'),
                'entry.1226801076': flagshipEvents,
                'entry.577969518': technicalEvents,
                'entry.1034072283': nonTechnicalEvents
            };

            console.log('Submitting form data: ', submitData); // Debugging: Log form data

            $.ajax({
                type: "POST",
                url: $(this).attr('action'),
                data: submitData,
                success: function(response) {
                    console.log('Form successfully submitted', response);
                    $('#thankYouMessage').show();
                    $('#gdgForm').hide();
                    
                    setTimeout(function() {
                        window.location.href = "https://gdg-fest.vercel.app/";
                    }, 3000);
                },
                error: function(xhr, status, error) {
                    console.error('Form submission error:', xhr, status, error);
                    alert('There was an error submitting the form. Please try again.');
                }
            });
        });

        // Check for conflicting technical events
        $('input[name="entry.577969518"]').change(function() {
            const codeCombat = $('#Code\\ Combat').is(':checked');
            const circuitBoard = $('#Circuit\\ Board').is(':checked');
            
            if (codeCombat && circuitBoard) {
                $('#technicalWarning').show();
            } else {
                $('#technicalWarning').hide();
            }
        });

        // Check for conflicting non-technical events
        $('input[name="entry.1034072283"]').change(function() {
            const animeQuiz = $('#Anime\\ Quiz').is(':checked');
            const connections = $('#Connections').is(':checked');
            
            if (animeQuiz && connections) {
                $('#nonTechnicalWarning').show();
            } else {
                $('#nonTechnicalWarning').hide();
            }
        });
    </script>
</body>
</html>
